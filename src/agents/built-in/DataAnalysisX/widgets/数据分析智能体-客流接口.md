## 数据分析智能体工具接口

### 数据分析智能体-根据时间范围查询客流量数据

**描述**
数据分析智能体-根据时间范围查询客流量数据,同比增长率为正数则代表客流增加，同比增长率为负数则代表客流减少。
1. 获取用户有权限的所有门店客流数据
2. 按 `chainRate`（环比增长率）降序排序
3. 取环比增长率最高的前3个门店作为 `topList`
4. 取环比增长率最低的后3个门店作为 `bottomList`
5. 返回包含topList和bottomList的结果对象

**请求地址:** `POST` /aiAgent/actions/getPassengerChainRateTopBottom


**请求Body**

| 参数   | 类型   | 是否必须 | 长度 | 缺省值 | 描述   |
| --- | ---- | ---- | ----| ----| ----|
|startTime | string | 否 |   | 2026-01-01 |  |
|endTime | string | 否 |   | 2026-01-31 |  |

**请求示例**

```json
{
  "startTime": "2026-01-01",
  "endTime": "2026-01-31"
}
```

**响应Body**

| 参数   | 类型   | 是否必须 | 长度 | 缺省值 | 描述   |
| --- | ---- | ---- | ----| ----| ----|
|code | number | 是 |   | 200 |  |
|data | object | 是 |   |  |  |
|&nbsp;&nbsp;&nbsp;&nbsp;topList | array[object] | 是 |   |  |  |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current | number | 否 |   | 1500 | 时间范围内客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain | number | 否 |   | 500 | 环比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last | number | 否 |   | 1000 | 同比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastRate | number | 否 |   | 50 | 同比增长率（10表示10%，四舍五入） |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storeName | string | 否 |   |  | 门店名称 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storeId | string | 否 |   | store001 |  |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chainRate | number | 否 |   | 80 | 环比增长率（20表示20%，四舍五入） |
|&nbsp;&nbsp;&nbsp;&nbsp;bottomList | array[object] | 否 |   |  |  |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current | number | 否 |   | 500 | 时间范围内客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain | number | 否 |   | -100 | 环比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last | number | 否 |   | 600 | 同比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastRate | number | 否 |   | -17 | 同比增长率（10表示10%，四舍五入） |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storeName | string | 否 |   |  | 门店名称 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storeId | string | 否 |   | store010 |  |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chainRate | number | 否 |   | -30 | 环比增长率（20表示20%，四舍五入） |
|message | string | 是 |   | success |  |

**响应示例**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "topList": [
      {
        "storeId": "store001",
        "storeName": "北京朝阳店",
        "current": 1500,
        "chain": 500,
        "last": 1000,
        "chainRate": 80,
        "lastRate": 50
      },
      {
        "storeId": "store002",
        "storeName": "上海浦东店",
        "current": 1200,
        "chain": 300,
        "last": 900,
        "chainRate": 60,
        "lastRate": 33
      },
      {
        "storeId": "store003",
        "storeName": "广州天河店",
        "current": 1000,
        "chain": 200,
        "last": 800,
        "chainRate": 50,
        "lastRate": 25
      }
    ],
    "bottomList": [
      {
        "storeId": "store010",
        "storeName": "深圳南山店",
        "current": 500,
        "chain": -100,
        "last": 600,
        "chainRate": -30,
        "lastRate": -17
      },
      {
        "storeId": "store011",
        "storeName": "杭州西湖店",
        "current": 400,
        "chain": -150,
        "last": 550,
        "chainRate": -40,
        "lastRate": -27
      },
      {
        "storeId": "store012",
        "storeName": "成都锦江店",
        "current": 300,
        "chain": -200,
        "last": 500,
        "chainRate": -50,
        "lastRate": -40
      }
    ]
  }
}
```

### 数据分析智能体-主动推送-获取门店客流重点变化topN

**描述**
1. 获取用户有权限的所有门店客流数据
2. 筛选出同比增长率>50% 或 环比增长率>20% 的门店
3. 按同比+环比增长率总和降序排序
4. 返回前10条数据

**请求地址:** `POST` /aiAgent/actions/getPassengerChangesForDataAnalysis

**请求Body**

| 参数   | 类型   | 是否必须 | 长度 | 缺省值 | 描述   |
| --- | ---- | ---- | ----| ----| ----|
| startTime | string | 是 |   | 2026-01-14 | 开始时间 |
| endTime | string | 是 |   | 2026-01-14 | 结束时间 |

**响应Body**

| 参数   | 类型   | 是否必须 | 长度 | 缺省值 | 描述   |
| --- | ---- | ---- | ----| ----| ----|
| code | number | 是 |   | 200 |  |
| data | array[object] | 是 |   |  |  |
|&nbsp;&nbsp;&nbsp;&nbsp;current | number | 是 |   | 1500 | 时间范围内客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;chain | number | 是 |   | 500 | 环比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;last | number | 是 |   | 1000 | 同比客流量 |
|&nbsp;&nbsp;&nbsp;&nbsp;lastRate | number | 是 |   | 50 | 同比增长率（10表示10%，四舍五入） |
|&nbsp;&nbsp;&nbsp;&nbsp;storeName | string | 是 |   |  | 门店名称 |
|&nbsp;&nbsp;&nbsp;&nbsp;storeId | string | 是 |   |  | 门店id |
|&nbsp;&nbsp;&nbsp;&nbsp;chainRate | number | 是 |   | 33 | 环比增长率（20表示20%，四舍五入） |
| message | string | 是 |   | success |  |

**响应示例**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "storeId": "store001",
      "storeName": "北京朝阳门店",
      "current": 1500,
      "chain": 500,
      "last": 1000,
      "chainRate": 33,
      "lastRate": 50
    },
    {
      "storeId": "store002",
      "storeName": "上海浦东门店",
      "current": 2000,
      "chain": 800,
      "last": 1200,
      "chainRate": 67,
      "lastRate": 67
    }
  ]
}
```

