# å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•æ„å»ºã€å‘å¸ƒ `hik-cloud-agentX` ç»„ä»¶åº“åˆ° npmã€‚

---

## ğŸ“¦ å‰ç½®å‡†å¤‡

### 1. ç™»å½• npm

é¦–å…ˆç¡®ä¿ä½ å·²ç»ç™»å½•åˆ° npmï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œè¿è¡Œï¼š

```bash
npm login
```

è¾“å…¥ä½ çš„ npm ç”¨æˆ·åã€å¯†ç å’Œé‚®ç®±ã€‚

### 2. æ£€æŸ¥ npm æº

ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯å®˜æ–¹ npm æºï¼ˆä¸æ˜¯æ·˜å®é•œåƒç­‰ï¼‰ï¼š

```bash
npm config get registry
# åº”è¯¥è¾“å‡ºï¼šhttps://registry.npmjs.org/
```

å¦‚æœä¸æ˜¯ï¼Œå¯ä»¥è®¾ç½®ä¸ºå®˜æ–¹æºï¼š

```bash
npm config set registry https://registry.npmjs.org/
```

---

## ğŸš€ å‘å¸ƒæµç¨‹

### å¸¸è§„å‘å¸ƒï¼ˆæ¨èï¼‰

æ ¹æ®è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œé€‰æ‹©å¯¹åº”çš„å‘å¸ƒå‘½ä»¤ï¼š

#### è¡¥ä¸ç‰ˆæœ¬ï¼ˆPatchï¼‰- ä¿®å¤ Bug

ä» `1.0.4` â†’ `1.0.5`

```bash
npm run release:patch
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¿®å¤ Bug
- ä¼˜åŒ–æ€§èƒ½
- ä»£ç é‡æ„ï¼ˆä¸å½±å“ APIï¼‰
- æ–‡æ¡£æ›´æ–°

---

#### æ¬¡ç‰ˆæœ¬ï¼ˆMinorï¼‰- æ–°å¢åŠŸèƒ½

ä» `1.0.4` â†’ `1.1.0`

```bash
npm run release:minor
```

**é€‚ç”¨åœºæ™¯ï¼š**
- æ–°å¢åŠŸèƒ½ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰
- æ–°å¢ç»„ä»¶
- æ–°å¢ API

---

#### ä¸»ç‰ˆæœ¬ï¼ˆMajorï¼‰- ç ´åæ€§æ›´æ–°

ä» `1.0.4` â†’ `2.0.0`

```bash
npm run release:major
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¸å…¼å®¹çš„ API ä¿®æ”¹
- ç§»é™¤å·²åºŸå¼ƒçš„åŠŸèƒ½
- å¤§ç‰ˆæœ¬é‡æ„

---

### Beta ç‰ˆæœ¬å‘å¸ƒ

å¦‚æœä½ æƒ³å‘å¸ƒæµ‹è¯•ç‰ˆæœ¬ï¼ˆä¸å½±å“ latest æ ‡ç­¾ï¼‰ï¼š

```bash
npm run release:beta
```

ç‰ˆæœ¬å·ä¼šå˜æˆï¼š`1.0.4` â†’ `1.0.5-beta.0`

ç”¨æˆ·å®‰è£… beta ç‰ˆæœ¬ï¼š

```bash
npm install hik-cloud-agentX@beta
```

---

## ğŸ”§ æ‰‹åŠ¨å‘å¸ƒï¼ˆé«˜çº§ï¼‰

å¦‚æœä½ éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œæ¯ä¸€æ­¥ï¼š

### 1. æ„å»ºæ‰“åŒ…

```bash
npm run build
```

ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ `lib/` æ–‡ä»¶å¤¹ï¼ŒåŒ…å«ï¼š
- `hik-cloud-agentX.es.js` - ES Module æ ¼å¼
- `hik-cloud-agentX.umd.js` - UMD æ ¼å¼ï¼ˆå…¼å®¹æµè§ˆå™¨ script æ ‡ç­¾ï¼‰
- `style.css` - ç»„ä»¶æ ·å¼

### 2. æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·

ç¼–è¾‘ `package.json` ä¸­çš„ `version` å­—æ®µï¼Œæˆ–ä½¿ç”¨ï¼š

```bash
npm version patch    # 1.0.4 â†’ 1.0.5
npm version minor    # 1.0.4 â†’ 1.1.0
npm version major    # 1.0.4 â†’ 2.0.0
```

### 3. å‘å¸ƒåˆ° npm

```bash
npm publish --access public
```

---

## âœ… å‘å¸ƒæ£€æŸ¥æ¸…å•

åœ¨æ‰§è¡Œå‘å¸ƒå‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] æ‰€æœ‰ä»£ç å·²æäº¤åˆ° Git
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ›´æ–°äº† CHANGELOG.mdï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ£€æŸ¥äº† `lib/` ç›®å½•çš„æ‰“åŒ…äº§ç‰©
- [ ] ç¡®è®¤ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
- [ ] ç¡®è®¤ `peerDependencies` å’Œ `dependencies` é…ç½®æ­£ç¡®

---

## ğŸ“„ ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://semver.org/lang/zh-CN/)ï¼š

```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å· (MAJOR.MINOR.PATCH)
```

- **MAJORï¼ˆä¸»ç‰ˆæœ¬å·ï¼‰**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **MINORï¼ˆæ¬¡ç‰ˆæœ¬å·ï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **PATCHï¼ˆä¿®è®¢å·ï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q1: å‘å¸ƒåå¦‚ä½•æ’¤å›ï¼Ÿ

å¦‚æœå‘å¸ƒå 24 å°æ—¶å†…å‘ç°ä¸¥é‡é—®é¢˜ï¼Œå¯ä»¥æ’¤å›ï¼š

```bash
npm unpublish hik-cloud-agentX@1.0.5
```

**æ³¨æ„ï¼š** npm ä¸æ¨èä½¿ç”¨ `unpublish`ï¼Œå»ºè®®å‘å¸ƒä¿®å¤ç‰ˆæœ¬ã€‚

### Q2: å¦‚ä½•æŸ¥çœ‹å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼Ÿ

```bash
npm view hik-cloud-agentX versions
```

### Q3: æ‰“åŒ…åæ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

æ£€æŸ¥ `package.json` çš„ `files` å­—æ®µï¼Œç¡®ä¿åªåŒ…å«å¿…è¦æ–‡ä»¶ï¼š

```json
"files": [
  "lib",
  "src/style"
]
```

åŒæ—¶ç¡®ä¿ `.npmignore` æˆ– `.gitignore` æ’é™¤äº†ä¸å¿…è¦çš„æ–‡ä»¶ã€‚

### Q4: å‘å¸ƒå¤±è´¥æç¤ºæƒé™é—®é¢˜ï¼Ÿ

ç¡®ä¿ï¼š
1. ä½ å·²ç™»å½•ï¼š`npm whoami`
2. ä½ æœ‰å‘å¸ƒæƒé™ï¼ˆå¦‚æœæ˜¯ç»„ç»‡åŒ…ï¼‰
3. ä½¿ç”¨äº† `--access public` å‚æ•°

---

## ğŸ“š ç›¸å…³é“¾æ¥

- [npm å®˜æ–¹æ–‡æ¡£](https://docs.npmjs.com/)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [æ¥å…¥æ–‡æ¡£](./INTEGRATION.md)
